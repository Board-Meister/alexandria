"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[8097],{8357:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"marshal/dependency","title":"Dependencies","description":"Marshal, as any package manager, allows you to define your dependencies and automatically loads them for you.","source":"@site/docs/marshal/dependency.md","sourceDirName":"marshal","slug":"/marshal/dependency","permalink":"/docs/marshal/dependency","draft":false,"unlisted":false,"editUrl":"https://github.com/Board-Meister/alexandria/blob/master/docs/marshal/dependency.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Dependencies"},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/docs/marshal/installation"},"next":{"title":"Scope","permalink":"/docs/category/scope"}}');var a=r(4848),s=r(8453);const o={sidebar_position:3,sidebar_label:"Dependencies"},i="Dependencies",d={},c=[{value:"Create your first dependency",id:"create-your-first-dependency",level:2},{value:"Use dependency in entry file",id:"use-dependency-in-entry-file",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"dependencies",children:"Dependencies"})}),"\n",(0,a.jsx)(n.p,{children:"Marshal, as any package manager, allows you to define your dependencies and automatically loads them for you.\r\nAlthough you have to define each used dependency the order you register them in doesn't matter as Marshal will order\r\nthem for you."}),"\n",(0,a.jsx)(n.h2,{id:"create-your-first-dependency",children:"Create your first dependency"}),"\n",(0,a.jsx)(n.p,{children:"Each dependency will have to appear in two places. First your plugin registry to know what you depend on and then your\r\nplugin entry file to know how you refer it in code."}),"\n",(0,a.jsxs)(n.p,{children:["Lets start with registry, we define our dependencies in optional ",(0,a.jsx)(n.code,{children:"requires"})," parameter the registration:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="manager.ts"',children:"marshal.register({\r\n    entry: {\r\n        source: 'http://cdn.boardmeister.com/plugin/boardmeister/menu-manager',\r\n        namespace: 'boardmeister',\r\n        name: 'menu-manager',\r\n        version: '1.0.0',\r\n    },\r\n    type: 'module',\r\n    requires: [\r\n        \"boardmeister/router\",\r\n    ],\r\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Here we have passed unique constraint for the module we want to load into ",(0,a.jsx)(n.code,{children:"menu-manager"}),". From the constraint name we\r\ncan guess that menu manager requires a router to work properly."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="manager.ts"',children:"marshal.register({\r\n    entry: {\r\n        source: 'http://cdn.boardmeister.com/plugin/boardmeister/router',\r\n        namespace: 'boardmeister',\r\n        name: 'router',\r\n        version: '1.0.0',\r\n    },\r\n    type: 'module',\r\n});\n"})}),"\n",(0,a.jsx)(n.p,{children:"now with both plugins registrated we can start the load process:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="manager.ts"',children:"await marshal.load();\n"})}),"\n",(0,a.jsx)(n.h2,{id:"use-dependency-in-entry-file",children:"Use dependency in entry file"}),"\n",(0,a.jsx)(n.p,{children:"Now that we have registrated our plugin with explicit dependencies we should refactor our entry file to use said module:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="plugin.conf.ts"',children:"// Import router interfaces to give a shape to our dependency\r\nimport type { IRouter } from \"@boardmeister/router\";\r\n\r\nexport interface IInjected {\r\n  router: IRouter;\r\n}\r\n\r\nclass MenuManagerPluginEntry {\r\n  // We can name our dependencies however we want,\r\n  // just the constraint name must match the `requires` definition\r\n  static inject: Record<string, string> = {\r\n    myRouter: 'boardmeister/router',\r\n  }\r\n  inject(injections: IInjected): void {\r\n    console.log(injections.myRouter)\r\n  }\r\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Now if we load the application we should see in console our ",(0,a.jsx)(n.code,{children:"router"})," plugin midst other logged messages."]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var t=r(6540);const a={},s=t.createContext(a);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);