"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[3150],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var r=s(6540);const t={},a=r.createContext(t);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},9002:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"marshal/scope/README","title":"Creating scope","description":"As said in Intro some modules we have to access globally, not just inside our functions - but still not","source":"@site/docs/marshal/scope/README.md","sourceDirName":"marshal/scope","slug":"/marshal/scope/","permalink":"/docs/marshal/scope/","draft":false,"unlisted":false,"editUrl":"https://github.com/Board-Meister/alexandria/blob/master/docs/marshal/scope/README.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Creating scope"},"sidebar":"tutorialSidebar","previous":{"title":"Scope","permalink":"/docs/category/scope"},"next":{"title":"Aliasing","permalink":"/docs/marshal/scope/aliasing"}}');var t=s(4848),a=s(8453);const i={sidebar_position:1,sidebar_label:"Creating scope"},o="Creating scope",c={},l=[{value:"Create scope plugin",id:"create-scope-plugin",level:2},{value:"Scope file",id:"scope-file",level:2},{value:"Adding scope manually",id:"adding-scope-manually",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"creating-scope",children:"Creating scope"})}),"\n",(0,t.jsxs)(n.p,{children:["As said in ",(0,t.jsx)(n.a,{href:"/docs/marshal/",children:"Intro"})," some modules we have to access globally, not just inside our functions - but still not\r\navailable to anything other then our plugins!"]}),"\n",(0,t.jsxs)(n.p,{children:["For this purpose we have plugins of ",(0,t.jsx)(n.code,{children:"scope"})," type. There are few differences between ",(0,t.jsx)(n.code,{children:"scope"})," and ",(0,t.jsx)(n.code,{children:"module"})," plugins:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"})," > ",(0,t.jsx)(n.code,{children:"module"})," - scoped plugins have their own load queue, separate from modules. They are still ordered by their\r\n",(0,t.jsx)(n.code,{children:"requires"})," but are loaded before any module type plugin."]}),"\n",(0,t.jsxs)(n.li,{children:["scopes do not have ",(0,t.jsx)(n.strong,{children:"entry file"})," but ",(0,t.jsx)(n.strong,{children:"scope file"})," which should always return an object"]}),"\n",(0,t.jsxs)(n.li,{children:["you can add scoped variables manually without having to wait for the load process by ",(0,t.jsx)(n.code,{children:"addScope"})," method"]}),"\n",(0,t.jsx)(n.li,{children:"scopes are not initialized - they are never treated as classes"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"create-scope-plugin",children:"Create scope plugin"}),"\n",(0,t.jsxs)(n.p,{children:["There isn't much difference between ",(0,t.jsx)(n.code,{children:"module"})," and ",(0,t.jsx)(n.code,{children:"scope"})," registration except its type:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="manager.ts"',children:"marshal.register({\r\n    entry: {\r\n        source: 'http://cdn.boardmeister.com/plugin/boardmeister/react',\r\n        namespace: 'boardmeister',\r\n        name: 'react',\r\n        version: '1.0.0',\r\n    },\r\n    type: 'scope',\r\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"scope-file",children:"Scope file"}),"\n",(0,t.jsx)(n.p,{children:"But the file it points to is completely different:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="react.scope.ts"',children:"import React from 'react';\r\nimport * as JsxRuntime from 'react/jsx-runtime';\r\nimport ReactDOM from 'react-dom/client'\r\n\r\nexport default const scope = {\r\n  react: React,\r\n  jsxRuntime: JsxRuntime,\r\n  reactDom: ReactDOM,\r\n};\n"})}),"\n",(0,t.jsx)(n.p,{children:"Here we are exporting three libraries:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"React - the React library"}),"\n",(0,t.jsx)(n.li,{children:"React JSX - React syntax extension for writing UI"}),"\n",(0,t.jsx)(n.li,{children:"ReactDOM - React router"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"all of them have defined keys in the exported object which will be converted into actual variables when modules are\r\nloaded."}),"\n",(0,t.jsx)(n.admonition,{title:"Global variables",type:"danger",children:(0,t.jsxs)(n.p,{children:["This means that you have 3 global variables ",(0,t.jsx)(n.code,{children:"react"}),", ",(0,t.jsx)(n.code,{children:"jsxRuntime"})," and ",(0,t.jsx)(n.code,{children:"reactDom"})," which you cannot overwrite or create\r\nanew in your scope"]})}),"\n",(0,t.jsx)(n.p,{children:"Thanks to this scope now every other plugin you will use doesn't have to worry about bundling react into their script.\r\nThis saves space and you can be sure that everyone is using the same version of the UI builder."}),"\n",(0,t.jsx)(n.h2,{id:"adding-scope-manually",children:"Adding scope manually"}),"\n",(0,t.jsx)(n.p,{children:"If you already have loaded and initialized variable that should go into the scope of loaded plugins you can add\r\nit like so:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="manager.ts"',children:"import React from 'react';\r\n\r\nmarshal.addScope('react', React);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["now if you were to load other modules they will be able to use variable ",(0,t.jsx)(n.code,{children:"react"})," to access React functionality."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="plugin.ts"',children:"const { useEffect } = react;\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"You don't like this?",type:"tip",children:(0,t.jsxs)(n.p,{children:["If you are not a fan of example above and would prefer to use ",(0,t.jsx)(n.code,{children:"import { useEffect } from 'react'"})," be sure to read\r\n",(0,t.jsx)(n.a,{href:"/docs/marshal/scope/aliasing",children:"Aliasing"})]})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);