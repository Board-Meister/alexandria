"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[9940],{3792:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"herald/localized-events","title":"Localized events","description":"Sometime you want to fire an event that only a specific group of listeners will receive - something scoped, for","source":"@site/docs/herald/localized-events.md","sourceDirName":"herald","slug":"/herald/localized-events","permalink":"/docs/herald/localized-events","draft":false,"unlisted":false,"editUrl":"https://github.com/Board-Meister/alexandria/blob/master/docs/herald/localized-events.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Dispatching","permalink":"/docs/herald/dispatching"},"next":{"title":"Dullahan","permalink":"/docs/category/dullahan"}}');var i=t(4848),o=t(8453);const s={sidebar_position:5},c="Localized events",a={},l=[{value:"Direction",id:"direction",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"localized-events",children:"Localized events"})}),"\n",(0,i.jsx)(n.p,{children:"Sometime you want to fire an event that only a specific group of listeners will receive - something scoped, for\r\nexample, per component. Thanks to that you can have multiple instances of the same component all working independently\r\nwithout generating new event manager per component (and figuring out how to handle global listeners working on\r\nmultiple managers)."}),"\n",(0,i.jsxs)(n.p,{children:["To accommodate such need there is an option to fire event is specific locations in the document (similarly to how\r\nnative ",(0,i.jsx)(n.code,{children:"dispatchEvent"})," works). By passing node to either registration method or subscription object you can specify\r\nwhere is event listener is located."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const node = document.getElementById('myElement');\r\nherald.listen({\r\n    event: 'event',\r\n    subscription: () => {\r\n        console.log('Event fired!');\r\n    },\r\n    anchor: node,\r\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now when firing events you can pass specific parts of the document to it to give event its location:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const component = document.getElementById('componentInMyElement');\r\nawait herald.dispatch(new CustomEvent('event'), {\r\n    anchor: component,\r\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now every localized event listener, which isn't a direct parent of this event anchor, will be filtered out and not\r\nexecuted."}),"\n",(0,i.jsx)(n.admonition,{title:"Global listeners",type:"tip",children:(0,i.jsxs)(n.p,{children:["Even though event is localized the global listeners (one without ",(0,i.jsx)(n.code,{children:"anchor"}),") will be executed"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/*\r\n    Our structure\r\n    html\r\n    -- body\r\n    ---- div id=\"listenerDiv\"\r\n    ------ div id=\"dispatcherDiv\"\r\n    ---- div id=\"otherListenerDiv\"\r\n*/\r\n\r\nherald.batch([\r\n    {\r\n        event: 'localized',\r\n        subscription: () => {\r\n            console.log('Listener received event!');\r\n        },\r\n        anchor: listenerDiv,\r\n    },\r\n    {\r\n        event: 'localized',\r\n        subscription: () => {\r\n            console.log('Other listener received event!');\r\n        },\r\n        anchor: otherListenerDiv,\r\n    },\r\n]);\r\n// Output is only \"Listener received event!\"\r\nawait herald.dispatch(new CustomEvent('localized'), {\r\n    anchor: dispatcherDiv,\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"direction",children:"Direction"}),"\n",(0,i.jsxs)(n.p,{children:["Events dire upwards by default, from the dispatcher, up to the ",(0,i.jsx)(n.code,{children:"body"})," tag. But if you need for event to propagate down\r\nor both ways you can define it using ",(0,i.jsx)(n.code,{children:"direction"})," parameter."]}),"\n",(0,i.jsx)(n.p,{children:"Direction parameter accepts three different values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"up"})," - Default, event goes upward"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"down"})," - Event goes downward"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"both"})," - Event goes both upward and downward"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"await herald.dispatch(new CustomEvent('localized'), {\r\n    anchor: dispatcherDiv,\r\n    direction: 'both',\r\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now all listeners, be it up or down, will receive this event."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);